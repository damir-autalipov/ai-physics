<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ИИ: открытие физических законов — демо</title>

<!-- Plotly и Math.js -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>

<style>
  :root{
    --bg:#0f1724;
    --card:#0b1220;
    --glass: rgba(255,255,255,0.04);
    --accent1: #7c3aed; /* purple */
    --accent2: #06b6d4; /* teal */
    --muted: rgba(255,255,255,0.65);
    --glass-2: rgba(255,255,255,0.02);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(160deg,#041025 0%, #081433 40%, #071a2d 100%);
    color: #e6eef8;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    min-height:100vh;
    display:flex;
    align-items:flex-start;
    justify-content:center;
    padding:28px;
  }

  .wrap{
    width:100%;
    max-width:1100px;
    margin:20px;
  }

  header{
    display:flex;
    align-items:center;
    gap:20px;
    margin-bottom:18px;
  }
  .logo{
    width:64px;height:64px;border-radius:12px;
    background: linear-gradient(135deg,var(--accent1),var(--accent2));
    display:flex;align-items:center;justify-content:center;
    font-weight:700;font-size:20px;box-shadow:0 8px 30px rgba(12,17,40,0.6);
  }
  header h1{font-size:20px;margin:0}
  header p{margin:0;color:var(--muted);font-size:13px;}

  .grid{
    display:grid;
    grid-template-columns: 360px 1fr;
    gap:18px;
    align-items:start;
  }

  /* LEFT panel */
  .panel{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:14px;
    padding:18px;
    box-shadow: 0 6px 30px rgba(2,6,23,0.6);
    border:1px solid rgba(255,255,255,0.03);
  }

  .cards { display:flex;flex-direction:column; gap:10px; margin-bottom:12px; }
  .card{
    background:linear-gradient(180deg,var(--glass),var(--glass-2));
    border-radius:10px;padding:12px;cursor:pointer;
    display:flex;gap:12px;align-items:center;border:1px solid rgba(255,255,255,0.02);
    transition:transform .18s ease, box-shadow .18s ease;
  }
  .card:hover{transform:translateY(-6px); box-shadow:0 20px 40px rgba(12,17,40,0.6); }
  .card.active{outline:2px solid rgba(124,58,237,0.18);box-shadow:0 18px 50px rgba(124,58,237,0.06); transform:translateY(-4px);}

  .card .i {width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,var(--accent2),var(--accent1));display:flex;align-items:center;justify-content:center;font-weight:700;}
  .card h4{margin:0;font-size:15px}
  .card p{margin:0;color:var(--muted);font-size:12px}

  label{display:block;font-size:13px;margin-top:10px;color:var(--muted)}
  textarea.input, input.text {
    width:100%; padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);
    background:transparent;color:inherit;font-size:14px;margin-top:8px;resize:vertical;
    min-height:44px;
  }
  .controls{display:flex;gap:8px;margin-top:12px;}
  button.primary{
    background: linear-gradient(90deg,var(--accent1),var(--accent2));
    color:white;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600;
    box-shadow:0 10px 30px rgba(7,10,25,0.6);
  }
  button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:10px 12px;border-radius:10px;cursor:pointer}
  .small{font-size:13px;padding:8px 10px}

  .hint{font-size:12px;color:rgba(230,238,248,0.65);margin-top:8px}

  /* RIGHT results area */
  .results{
    display:flex;flex-direction:column;gap:12px;
  }
  .card-plot{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:14px;padding:14px;border:1px solid rgba(255,255,255,0.03);
  }
  #plot{width:100%;height:420px}

  .info{
    display:flex;gap:12px;align-items:center;justify-content:space-between;
    padding:10px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
    border:1px solid rgba(255,255,255,0.02);
  }
  .info .left{font-size:14px}
  .info .right{font-size:13px;color:var(--muted)}

  .result-block{
    display:flex;gap:12px;flex-wrap:wrap;align-items:center;
  }
  .result-pill{
    background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:10px;padding:12px 16px;font-weight:600;border:1px solid rgba(255,255,255,0.03);
  }

  footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
  @media (max-width:980px){
    .grid{grid-template-columns:1fr; }
    .panel{order:2}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">AI</div>
      <div>
        <h1>ИИ — лабораторный помощник: открытие законов</h1>
        <p>Выбери эксперимент → введи данные → получи формулу, график и физический параметр</p>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT -->
      <div class="panel">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <strong>Выбор эксперимента</strong>
          <div style="font-size:13px;color:var(--muted)">Демо-версия</div>
        </div>

        <div class="cards" id="experimentCards" style="margin-top:12px">
          <div class="card" data-mode="ohm" id="card-ohm">
            <div class="i">Ω</div>
            <div>
              <h4>Закон Ома</h4>
              <p>Отношение I(U): найдёт R (I = U/R)</p>
            </div>
          </div>

          <div class="card" data-mode="pendulum" id="card-pend">
            <div class="i">⏳</div>
            <div>
              <h4>Маятник (Ньютон)</h4>
              <p>Зависимость периода T от длины L — оценит g</p>
            </div>
          </div>

          <div class="card" data-mode="fall" id="card-fall">
            <div class="i">⬇️</div>
            <div>
              <h4>Свободное падение</h4>
              <p>h(t) — вычислит g по h = ½ g t²</p>
            </div>
          </div>

          <div class="card active" data-mode="custom" id="card-custom">
            <div class="i">✳️</div>
            <div>
              <h4>Новая зависимость</h4>
              <p>Пользователь сам задаёт X и Y</p>
            </div>
          </div>
        </div>

        <div style="margin-top:14px">
          <label>Ввод данных (через запятую) или загрузить CSV</label>
          <textarea id="inputA" class="input" placeholder="Например: 1, 2, 3, 4"></textarea>
          <textarea id="inputB" class="input" placeholder="Например: 2, 4.1, 5.9, 8.2"></textarea>

          <div style="display:flex;gap:8px;margin-top:10px;align-items:center">
            <input type="file" id="csvFile" accept=".csv" style="flex:1">
            <button class="ghost small" id="btnExample">Загрузить пример</button>
          </div>

          <div class="hint">CSV должен содержать два столбца без заголовков или с заголовком: X,Y</div>

          <div class="controls" style="margin-top:14px">
            <button class="primary" id="btnAnalyze">Анализировать</button>
            <button class="ghost" id="btnReset">Сброс</button>
            <button class="ghost" id="btnCompare">Показать модели</button>
          </div>

          <div style="margin-top:12px;color:var(--muted);font-size:13px">
            Быстрый выбор: <span id="quickTips">X — значения, Y — отклик</span>
          </div>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="results">
        <div class="card-plot">
          <div class="info">
            <div class="left"><strong id="resultTitle">Готов к анализу</strong></div>
            <div class="right" id="resultSubtitle">Выберите эксперимент и введите данные → нажмите «Анализировать»</div>
          </div>

          <div id="plot" style="margin-top:12px"></div>
        </div>

        <div class="card-plot">
          <div style="display:flex;gap:12px;align-items:center;justify-content:space-between">
            <div>
              <div style="font-size:14px;font-weight:700" id="bestModelName">—</div>
              <div style="font-size:13px;color:var(--muted)" id="bestModelFormula">—</div>
            </div>
            <div class="result-block">
              <div class="result-pill" id="pillR2">R² —</div>
              <div class="result-pill" id="pillParam">Параметр —</div>
            </div>
          </div>

          <div style="margin-top:12px;color:var(--muted);font-size:13px" id="modelDetails">
            Здесь появится подробная информация о выбранной модели.
          </div>
        </div>

        <footer>
          <div>Сделано как демо — можешь изменять формулы и стили. Сохрани как index.html и размещай на GitHub Pages.</div>
        </footer>
      </div>
    </div>
  </div>

<script>
/* =========================
   ЛОГИКА: парсинг, модели, R2
   ========================= */

const cards = document.querySelectorAll('.card');
let mode = 'custom';
cards.forEach(c => c.addEventListener('click', ()=> {
  cards.forEach(x=>x.classList.remove('active'));
  c.classList.add('active');
  mode = c.dataset.mode;
  adaptPlaceholders(mode);
}));

function adaptPlaceholders(m){
  const a = document.getElementById('inputA'), b = document.getElementById('inputB'), tips = document.getElementById('quickTips');
  if(m==='ohm'){
    a.placeholder = 'U (В): 1, 2, 3, 4';
    b.placeholder = 'I (A): 0.2, 0.4, 0.6, 0.8';
    tips.textContent = 'Введите напряжения U и соответствующие токи I';
  } else if(m==='pendulum'){
    a.placeholder = 'L (м): 0.1, 0.2, 0.3, 0.4';
    b.placeholder = 'T (с): 0.63, 0.9, 1.1, 1.25';
    tips.textContent = 'Длина L и период T';
  } else if(m==='fall'){
    a.placeholder = 't (с): 0.2, 0.4, 0.6, 0.8';
    b.placeholder = 'h (м): 0.02, 0.08, 0.18, 0.32';
    tips.textContent = 'Время t и высота h';
  } else {
    a.placeholder = 'X: 1, 2, 3, 4';
    b.placeholder = 'Y: 2, 4.1, 5.9, 8.2';
    tips.textContent = 'Свободная зависимость: X (ввод) и Y (ответ)';
  }
}
adaptPlaceholders(mode);

/* утилиты */
function parseSeries(str){
  // поддержка разделителя запятая или пробел/таб
  if(!str) return [];
  // если разделен строками — тоже поддержим
  const cleaned = str.trim().replace(/\r/g,'').split(/[\n;]/).map(s=>s.trim()).join(',');
  const parts = cleaned.split(',').map(s=>s.trim()).filter(s=>s!=='');
  return parts.map(p=>{
    const n = parseFloat(p);
    return isNaN(n)? null : n;
  });
}

function prettyFormula(obj){
  // obj: {type, coeffs}
  if(obj.type==='linear'){
    const [a,b]=obj.coeffs;
    return `y = ${a.toFixed(4)}·x ${b>=0?'+':'-'} ${Math.abs(b).toFixed(4)}`;
  } else if(obj.type==='quad'){
    const [A,B,C]=obj.coeffs;
    return `y = ${A.toFixed(4)}·x² ${B>=0?'+':'-'} ${Math.abs(B).toFixed(4)}·x ${C>=0?'+':'-'} ${Math.abs(C).toFixed(4)}`;
  } else if(obj.type==='exp'){
    const [p0,p1]=obj.coeffs; // y = p0 * e^(p1 x)
    return `y = ${p0.toFixed(4)}·e^{${p1.toFixed(4)}·x}`;
  } else if(obj.type==='log'){
    const [a,b]=obj.coeffs; // y = a ln x + b
    return `y = ${a.toFixed(4)}·ln(x) ${b>=0?'+':'-'} ${Math.abs(b).toFixed(4)}`;
  }
  return '—';
}

function r2score(y, ypred){
  const meanY = math.mean(y);
  const ssRes = math.sum(y.map((yi,i)=> (yi-ypred[i])**2));
  const ssTot = math.sum(y.map(yi => (yi-meanY)**2));
  if (ssTot === 0) return 1.0;
  return 1 - ssRes/ssTot;
}

/* модели: проверяем линейную, квадратичную, экспоненциальную, логарифмическую */
function fitLinear(x,y){
  const meanX = math.mean(x), meanY = math.mean(y);
  const num = math.sum(x.map((xi,i)=> (xi-meanX)*(y[i]-meanY)));
  const den = math.sum(x.map(xi=> (xi-meanX)**2));
  const a = den===0?0: num/den;
  const b = meanY - a*meanX;
  const ypred = x.map(xi => a*xi + b);
  return {type:'linear', coeffs:[a,b], ypred, r2:r2score(y,ypred)};
}

function fitQuad(x,y){
  // метод наименьших квадратов для квадратичной модели
  const n = x.length;
  // формируем матрицу A (n x 3) with columns x^2, x, 1
  const X = math.matrix(x.map(xi => [xi*xi, xi, 1]));
  const Y = math.matrix(y);
  // theta = (X^T X)^{-1} X^T Y
  try{
    const Xt = math.transpose(X);
    const XtX = math.multiply(Xt, X);
    const XtXinv = math.inv(XtX);
    const XtY = math.multiply(Xt, Y);
    const theta = math.multiply(XtXinv, XtY).toArray().flat();
    const [A,B,C] = theta;
    const ypred = x.map(xi => A*xi*xi + B*xi + C);
    return {type:'quad', coeffs:[A,B,C], ypred, r2:r2score(y,ypred)};
  } catch(e){
    return {type:'quad', coeffs:[0,0,0], ypred:x.map(()=>0), r2:-Infinity};
  }
}

function fitExp(x,y){
  // y = p0 * e^(p1 x) => ln y = ln p0 + p1 x  => линейная регрессия ln y ~ x
  // требуется y>0
  if(y.some(yi=> yi<=0)) return {type:'exp', coeffs:[0,0], ypred:x.map(()=>0), r2:-Infinity};
  const lnY = y.map(yi=> Math.log(yi));
  const meanX = math.mean(x), meanLnY = math.mean(lnY);
  const num = math.sum(x.map((xi,i)=> (xi-meanX)*(lnY[i]-meanLnY)));
  const den = math.sum(x.map(xi=> (xi-meanX)**2));
  const p1 = den===0?0: num/den;
  const lnP0 = meanLnY - p1*meanX;
  const p0 = Math.exp(lnP0);
  const ypred = x.map(xi => p0 * Math.exp(p1*xi));
  return {type:'exp', coeffs:[p0,p1], ypred, r2:r2score(y,ypred)};
}

function fitLog(x,y){
  // y = a ln x + b  -> requires x>0
  if(x.some(xi=> xi<=0)) return {type:'log', coeffs:[0,0], ypred:x.map(()=>0), r2:-Infinity};
  const lnX = x.map(xi=> Math.log(xi));
  const meanLnX = math.mean(lnX), meanY = math.mean(y);
  const num = math.sum(lnX.map((xi,i)=> (xi-meanLnX)*(y[i]-meanY)));
  const den = math.sum(lnX.map(xi=> (xi-meanLnX)**2));
  const a = den===0?0: num/den;
  const b = meanY - a*meanLnX;
  const ypred = x.map(xi => a*Math.log(xi) + b);
  return {type:'log', coeffs:[a,b], ypred, r2:r2score(y,ypred)};
}

/* main analyze flow */
document.getElementById('btnAnalyze').addEventListener('click', ()=>runAnalysis(false));
document.getElementById('btnReset').addEventListener('click', resetAll);
document.getElementById('btnExample').addEventListener('click', loadExample);
document.getElementById('csvFile').addEventListener('change', handleCSV);
document.getElementById('btnCompare').addEventListener('click', ()=>runAnalysis(true));

function handleCSV(e){
  const f = e.target.files[0];
  if(!f) return;
  const reader = new FileReader();
  reader.onload = function(evt){
    const txt = evt.target.result.trim();
    // try parse lines: if header present, skip non-number first row heuristics
    const lines = txt.split(/\r?\n/).map(l=>l.trim()).filter(Boolean);
    const rows = lines.map(l => l.split(/,|\s+/).map(s=>s.trim()).filter(Boolean));
    // try to take first two numeric columns
    let X = [], Y = [];
    for(let row of rows){
      if(row.length<2) continue;
      const a = parseFloat(row[0]), b = parseFloat(row[1]);
      if(!isNaN(a) && !isNaN(b)){
        X.push(a); Y.push(b);
      } else {
        // maybe header row -> skip
      }
    }
    if(X.length === 0){
      alert('Не удалось распознать числовые пары в CSV. Формат: X,Y');
      return;
    }
    document.getElementById('inputA').value = X.join(', ');
    document.getElementById('inputB').value = Y.join(', ');
  };
  reader.readAsText(f);
}

function loadExample(){
  if(mode==='ohm'){
    document.getElementById('inputA').value = '1,2,3,4,5';
    document.getElementById('inputB').value = '0.98,0.51,0.35,0.25,0.19'; // rough inverse behaviour
  } else if(mode==='pendulum'){
    document.getElementById('inputA').value = '0.1,0.2,0.3,0.4,0.5';
    document.getElementById('inputB').value = '0.63,0.89,1.09,1.26,1.41';
  } else if(mode==='fall'){
    document.getElementById('inputA').value = '0.2,0.4,0.6,0.8,1.0';
    document.getElementById('inputB').value = '0.2,0.8,1.8,3.2,5.0';
  } else {
    document.getElementById('inputA').value = '1,2,3,4,5';
    document.getElementById('inputB').value = '2.1,4.0,5.9,8.3,10.1';
  }
}

/* runAnalysis(showAllModels) - if showAllModels true, plot all candidate curves */
function runAnalysis(showAllModels=false){
  const A = parseSeries(document.getElementById('inputA').value);
  const B = parseSeries(document.getElementById('inputB').value);
  if(A.length === 0 || B.length === 0) return alert('Введите оба ряда данных.');
  if(A.length !== B.length) return alert('Длины массивов должны совпадать.');

  const x = A, y = B;
  // require at least 3 points for quadratics, 2 for linear
  if(x.length < 2) return alert('Нужно минимум 2 точки для анализа.');

  // Fit all models
  const M_lin = fitLinear(x,y);
  const M_quad = fitQuad(x,y);
  const M_exp = fitExp(x,y);
  const M_log = fitLog(x,y);

  const models = [M_lin, M_quad, M_exp, M_log];

  // Filter out invalid r2 (neg inf) and pick max
  const best = models.reduce((acc,m)=>{
    if(m.r2> (acc.r2 ?? -Infinity)) return m; else return acc;
  }, {r2:-Infinity});

  // Build tidy formula and results text
  document.getElementById('bestModelName').textContent = 'Лучшая модель: ' + (best.type==='linear'?'Линейная': best.type==='quad'?'Квадратичная':best.type==='exp'?'Экспоненциальная': 'Логарифмическая');
  document.getElementById('bestModelFormula').textContent = prettyFormula(best);
  document.getElementById('pillR2').textContent = 'R² = ' + (isFinite(best.r2)? best.r2.toFixed(4) : '—');
  const pillParam = document.getElementById('pillParam');

  // compute physics-specific parameter if mode requires
  let special = '—';
  if(mode==='ohm'){
    // For Ohm: if relation is I = a*x + b where x = U and y = I then R ≈ 1/a if intercept small
    if(best.type === 'linear'){
      const a = best.coeffs[0]; // I = a U + b  => R = 1/a
      if(Math.abs(a) > 1e-9) special = `R ≈ ${(1/a).toFixed(4)} Ω`;
    } else if(best.type === 'exp' || best.type === 'log' || best.type === 'quad'){
      special = 'Нелинейная I(U) — эквивалентное R не определён.';
    }
  } else if(mode==='pendulum'){
    // T = 2π sqrt(L/g) => T^2 = (4π^2 / g) * L  -> linear fit of T^2 vs L gives slope s = 4π^2/g -> g = 4π^2 / s
    // Check if we can transform: x=L, y=T -> do linear fit of T^2 vs L
    const T2 = y.map(yi => yi*yi);
    const M = fitLinear(x, T2);
    if(M.r2 > 0.4){
      const s = M.coeffs[0];
      if(Math.abs(s) > 1e-9) special = `g ≈ ${(4*Math.PI*Math.PI / s).toFixed(4)} m/s² (по T²~L)`;
    } else special = 'Данные не подходят для точного определения g.';
  } else if(mode==='fall'){
    // h = 1/2 g t^2  => linear fit h vs t^2
    const t2 = x.map(xi => xi*xi);
    const M = fitLinear(t2, y); // h = s * t^2 + b, s ≈ g/2
    if(M.r2 > 0.3){
      const s = M.coeffs[0];
      special = `g ≈ ${(2*s).toFixed(4)} m/s² (по h~t²)`;
    } else special = 'Данные не подходят для точного определения g.';
  } else {
    special = '—';
  }
  pillParam.textContent = special;

  // model details
  const det = document.getElementById('modelDetails');
  det.innerHTML = `<div style="margin-bottom:8px"><strong>R² по моделям:</strong></div>
    <div style="display:flex;gap:10px;flex-wrap:wrap">
      <div class="result-pill">Линейная: ${isFinite(M_lin.r2)?M_lin.r2.toFixed(4):'—'}</div>
      <div class="result-pill">Квадратичная: ${isFinite(M_quad.r2)?M_quad.r2.toFixed(4):'—'}</div>
      <div class="result-pill">Экспоненциальная: ${isFinite(M_exp.r2)?M_exp.r2.toFixed(4):'—'}</div>
      <div class="result-pill">Логарифмическая: ${isFinite(M_log.r2)?M_log.r2.toFixed(4):'—'}</div>
    </div>`;

  // Plotting
  const traceData = [
    { x: x, y: y, mode:'markers', name:'Данные', marker:{size:7} }
  ];

  if(showAllModels){
    // generate smooth x grid
    const minX = Math.min(...x), maxX = Math.max(...x);
    const grid = math.range(minX, maxX, (maxX-minX)/100 || 0.1, true).toArray();
    const addModel = (m, nm, color) => {
      const yy = grid.map(gx => {
        if(m.type==='linear') return m.coeffs[0]*gx + m.coeffs[1];
        if(m.type==='quad') return m.coeffs[0]*gx*gx + m.coeffs[1]*gx + m.coeffs[2];
        if(m.type==='exp') return m.coeffs[0]*Math.exp(m.coeffs[1]*gx);
        if(m.type==='log') return m.coeffs[0]*Math.log(gx) + m.coeffs[1];
        return 0;
      });
      traceData.push({x:grid, y:yy, mode:'lines', name:nm, line:{width:2}});
    };
    addModel(M_lin, 'Линейная', '#ff7f0e');
    addModel(M_quad, 'Квадратичная', '#2ca02c');
    addModel(M_exp, 'Экспоненциальная', '#d62728');
    addModel(M_log, 'Логарифмическая', '#9467bd');
  } else {
    const grid = math.range(Math.min(...x), Math.max(...x), (Math.max(...x)-Math.min(...x))/200 || 0.1, true).toArray();
    const yy = grid.map(gx => {
      if(best.type==='linear') return best.coeffs[0]*gx + best.coeffs[1];
      if(best.type==='quad') return best.coeffs[0]*gx*gx + best.coeffs[1]*gx + best.coeffs[2];
      if(best.type==='exp') return best.coeffs[0]*Math.exp(best.coeffs[1]*gx);
      if(best.type==='log') return best.coeffs[0]*Math.log(gx) + best.coeffs[1];
      return 0;
    });
    traceData.push({x:grid, y:yy, mode:'lines', name:'Лучшая модель', line:{width:3}});
  }

  Plotly.newPlot('plot', traceData, {
    margin:{t:20,l:50,r:20,b:50},
    legend:{orientation:'h'},
    xaxis:{title:mode==='pendulum'?'L / t':'X'},
    yaxis:{title:'Y'},
    font:{color:'#e6eef8'}
  });

  // title update
  document.getElementById('resultTitle').textContent = 'Анализ завершён';
  document.getElementById('resultSubtitle').textContent = `Модель: ${best.type} — R²=${isFinite(best.r2)?best.r2.toFixed(4):'—'}`;
}

/* reset */
function resetAll(){
  document.getElementById('inputA').value='';
  document.getElementById('inputB').value='';
  document.getElementById('csvFile').value='';
  document.getElementById('bestModelName').textContent = '—';
  document.getElementById('bestModelFormula').textContent = '—';
  document.getElementById('pillR2').textContent = 'R² —';
  document.getElementById('pillParam').textContent = 'Параметр —';
  document.getElementById('modelDetails').textContent = 'Здесь появится подробная информация о выбранной модели.';
  Plotly.purge('plot');
  document.getElementById('resultTitle').textContent = 'Готов к анализу';
  document.getElementById('resultSubtitle').textContent = 'Выберите эксперимент и введите данные → нажмите «Анализировать»';
}

/* initial example fill */
loadExample();

</script>
</body>
</html>
